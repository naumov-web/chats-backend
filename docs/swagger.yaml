swagger: "2.0"
info:
  title: Chats API
  description: Docs for Chats API
  version: 1.0.0
schemes:
  - http
host: 127.0.0.1:31080
basePath: /api

securityDefinitions:
  JWT:
    type: apiKey
    in: header
    name: Authorization

paths:

  /v1/auth/register/random-account:
    post:
      tags:
        - auth
      summary: Register random account
      description: Register random account without login and password
      produces:
        - application/json
      consumes:
        - application/json
      parameters:
        - in: header
          type: string
          name: X-Locale
          enum:
            - ru
            - en
      responses:
        200:
          description: Successful operation
          schema:
            $ref: "#/definitions/RegisterRandomAccountSuccessResponseModel"

  /v1/auth/register:
    post:
      tags:
        - auth
      summary: Register new account
      description: Register new account with username and password
      produces:
        - application/json
      consumes:
        - application/json
      parameters:
        - in: header
          type: string
          name: X-Locale
          enum:
            - ru
            - en
        - name: "RegisterAccountRequestBody"
          in: body
          description: "Request body for registration of new account"
          required: true
          schema:
            $ref: "#/definitions/RegisterAccountRequestModel"
      responses:
        200:
          description: Successful operation
          schema:
            $ref: "#/definitions/RegisterAccountSuccessResponseModel"
        422:
          description: "Validation error"
          schema:
            $ref: "#/definitions/ValidationErrorResponseModel"

  /v1/auth/login:
    post:
      tags:
        - auth
      summary: Authorize user
      description: Authorize user by username and password
      produces:
        - application/json
      consumes:
        - application/json
      parameters:
        - in: header
          type: string
          name: X-Locale
          enum:
            - ru
            - en
        - name: "LoginRequestBody"
          in: body
          description: "Request body for authorization"
          required: true
          schema:
            $ref: "#/definitions/LoginRequestModel"
      responses:
        200:
          description: Successful operation
          schema:
            $ref: "#/definitions/LoginResponseModel"
        403:
          description: "Forbidden"
          schema:
            $ref: "#/definitions/DefaultErrorResponseModel"
        422:
          description: "Validation error"
          schema:
            $ref: "#/definitions/ValidationErrorResponseModel"

definitions:

  # Register random account
  RegisterRandomAccountSuccessResponseModel:
    type: object
    properties:
      success:
        type: boolean
      message:
        type: string
      token:
        type: string
      username:
        type: string

  # Register account
  RegisterAccountRequestModel:
    type: object
    required:
      - username
      - password
    properties:
      username:
        type: string
      password:
        type: string

  RegisterAccountSuccessResponseModel:
    type: object
    properties:
      success:
        type: boolean
      message:
        type: string
      token:
        type: string
      username:
        type: string

  # Login
  LoginRequestModel:
    type: object
    required:
      - username
      - password
    properties:
      username:
        type: string
      password:
        type: string

  LoginResponseModel:
    type: object
    properties:
      success:
        type: boolean
      message:
        type: string
      token:
        type: string

  # Common
  DefaultErrorResponseModel:
    type: object
    properties:
      success:
        type: boolean
      message:
        type: string

  ValidationErrorResponseModel:
    type: object
    properties:
      errors:
        type: object
